# CheckRules
#
# Common checks.

rule CheckGccPlatform
{
	# CheckGccPlatform ;
	# Detects if we are using gcc4 and set IS_GCC4_PLATFORM according.

	# First find out which gcc version the platform uses.
	IS_GCC4_PLATFORM = ;
	if $(OS) = HAIKU {
		# Only Haiku might use gcc 4. We use the existence of a libstdc++.r4.so in
		# /boot/develop/lib/x86 to judge whether this is a BeOS compatible and thus
		# gcc 2 platform. This is not entirely correct, but should be good enough
		# for the time being.
		local haveLibStdC++.R4 = [ Glob /boot/develop/lib/x86 : libstdc++.r4.so ] ;
		if ! $(haveLibStdC++.R4) {
			IS_GCC4_PLATFORM = 1 ;
		}
	}
}
